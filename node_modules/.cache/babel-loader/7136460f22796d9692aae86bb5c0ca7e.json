{"ast":null,"code":"import _regeneratorRuntime from\"/Users/markkrasner/Downloads/MDB5-REACT-UI-KIT-Free-4.0.0/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/markkrasner/Downloads/MDB5-REACT-UI-KIT-Free-4.0.0/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/markkrasner/Downloads/MDB5-REACT-UI-KIT-Free-4.0.0/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{Component,useEffect,useState}from'react';import{MDBTable,MDBTableHead,MDBTableBody,MDBBtn}from'mdb-react-ui-kit';import{ethers}from\"ethers\";import abi from\"./abi.json\";import Navbar from'./Navbar.js';import detectEthereumProvider from'@metamask/detect-provider';import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function Table(){var _useState=useState(''),_useState2=_slicedToArray(_useState,2),selectedAddress=_useState2[0],setSelectedAddress=_useState2[1];var _useState3=useState(''),_useState4=_slicedToArray(_useState3,2),propOne=_useState4[0],setPropOne=_useState4[1];var _useState5=useState(''),_useState6=_slicedToArray(_useState5,2),propTwo=_useState6[0],setPropTwo=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),propThree=_useState8[0],setPropThree=_useState8[1];React.useEffect(function(){function checkProvider(){return _checkProvider.apply(this,arguments);}function _checkProvider(){_checkProvider=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var provider;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.next=2;return detectEthereumProvider();case 2:provider=_context.sent;if(provider){console.log('hello');connect();}case 4:case\"end\":return _context.stop();}}},_callee);}));return _checkProvider.apply(this,arguments);}checkProvider();},[]);function connect(){return _connect.apply(this,arguments);}function _connect(){_connect=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var provider,accounts,contract,propNumbers,numbers,tableNumber,i,arr,proposalOne,description,name,proposedBy,item,myDate,finalDate,deadline,votesUp,votesDown,passed;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(typeof window.ethereum=='undefined'){alert('Please install Metamask to continue');}provider=new ethers.providers.Web3Provider(web3.currentProvider);_context2.next=4;return provider.send(\"eth_requestAccounts\",[]);case 4:accounts=_context2.sent;contract=new ethers.Contract('0x1eC7b4E7AD7BEa7371e849F4c31f267b95380055',abi,provider);_context2.next=8;return contract.viewProposals();case 8:propNumbers=_context2.sent;_context2.next=11;return propNumbers[1]._hex;case 11:numbers=_context2.sent;tableNumber=parseInt(numbers,16);console.log(tableNumber);i=tableNumber;case 15:if(!(i>=1)){_context2.next=56;break;}arr=[];_context2.next=19;return contract.proposalToId(i);case 19:proposalOne=_context2.sent;_context2.next=22;return proposalOne.description;case 22:description=_context2.sent;_context2.next=25;return proposalOne.name;case 25:name=_context2.sent;_context2.next=28;return proposalOne.proposedBy.toString();case 28:proposedBy=_context2.sent;_context2.next=31;return proposalOne.deadline;case 31:item=_context2.sent;_context2.next=34;return new Date(item*1000);case 34:myDate=_context2.sent;_context2.next=37;return myDate.toLocaleString();case 37:finalDate=_context2.sent;_context2.next=40;return finalDate;case 40:_context2.t0=_context2.sent;deadline=_context2.t0+' UTC';_context2.next=44;return proposalOne.votesUp.toString();case 44:votesUp=_context2.sent;_context2.next=47;return proposalOne.votesDown.toString();case 47:votesDown=_context2.sent;_context2.next=50;return proposalOne.passed.toString();case 50:passed=_context2.sent;arr.push(i.toString(),name,description,proposedBy,deadline,votesUp,votesDown,passed);if(i==tableNumber){setPropThree(arr);}else if(i==tableNumber-1){setPropTwo(arr);}else if(i==tableNumber-2){setPropOne(arr);}case 53:i--;_context2.next=15;break;case 56:setSelectedAddress(accounts[0]);case 57:case\"end\":return _context2.stop();}}},_callee2);}));return _connect.apply(this,arguments);}if(!selectedAddress){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{title:\"DAO Proposals\",message:\"Please connect your wallet to view recent DAO proposals\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(MDBBtn,{onClick:connect,outline:true,rounded:true,children:\"Show Recent Proposals\"})]});}else if(selectedAddress.toString().length>3){console.log(selectedAddress);return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Navbar,{title:\"DAO Proposals\",message:\"You can view recent DAO proposals here\"}),/*#__PURE__*/_jsxs(MDBTable,{striped:true,children:[/*#__PURE__*/_jsx(MDBTableHead,{children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Proposal ID\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Name\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Description\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Proposed By\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Deadline\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Votes Up\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Votes Down\"}),/*#__PURE__*/_jsx(\"th\",{scope:\"col\",children:\"Passed?\"})]})}),/*#__PURE__*/_jsxs(MDBTableBody,{children:[/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:propThree[0]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",propThree[1]]}),/*#__PURE__*/_jsx(\"td\",{children:propThree[2]}),/*#__PURE__*/_jsx(\"td\",{children:propThree[3]}),/*#__PURE__*/_jsx(\"td\",{children:propThree[4]}),/*#__PURE__*/_jsx(\"td\",{children:propThree[5]}),/*#__PURE__*/_jsx(\"td\",{children:propThree[6]}),/*#__PURE__*/_jsx(\"td\",{children:propThree[7]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:propTwo[0]}),/*#__PURE__*/_jsxs(\"td\",{children:[\" \",propTwo[1]]}),/*#__PURE__*/_jsx(\"td\",{children:propTwo[2]}),/*#__PURE__*/_jsx(\"td\",{children:propTwo[3]}),/*#__PURE__*/_jsx(\"td\",{children:propTwo[4]}),/*#__PURE__*/_jsx(\"td\",{children:propTwo[5]}),/*#__PURE__*/_jsx(\"td\",{children:propTwo[6]}),/*#__PURE__*/_jsx(\"td\",{children:propTwo[7]})]}),/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{scope:\"row\",children:propOne[0]}),/*#__PURE__*/_jsx(\"td\",{children:propOne[1]}),/*#__PURE__*/_jsx(\"td\",{children:propOne[2]}),/*#__PURE__*/_jsx(\"td\",{children:propOne[3]}),/*#__PURE__*/_jsx(\"td\",{children:propOne[4]}),/*#__PURE__*/_jsx(\"td\",{children:propOne[5]}),/*#__PURE__*/_jsx(\"td\",{children:propOne[6]}),/*#__PURE__*/_jsx(\"td\",{children:propOne[7]})]})]})]})]});}}","map":{"version":3,"names":["React","Component","useEffect","useState","MDBTable","MDBTableHead","MDBTableBody","MDBBtn","ethers","abi","Navbar","detectEthereumProvider","Table","selectedAddress","setSelectedAddress","propOne","setPropOne","propTwo","setPropTwo","propThree","setPropThree","checkProvider","provider","console","log","connect","window","ethereum","alert","providers","Web3Provider","web3","currentProvider","send","accounts","contract","Contract","viewProposals","propNumbers","_hex","numbers","tableNumber","parseInt","i","arr","proposalToId","proposalOne","description","name","proposedBy","toString","deadline","item","Date","myDate","toLocaleString","finalDate","votesUp","votesDown","passed","push","length"],"sources":["/Users/markkrasner/Downloads/MDB5-REACT-UI-KIT-Free-4.0.0/src/components/Table.js"],"sourcesContent":["import React, { Component, useEffect, useState } from 'react';\nimport { MDBTable, MDBTableHead, MDBTableBody, MDBBtn } from 'mdb-react-ui-kit';\nimport { ethers } from \"ethers\";\nimport abi from \"./abi.json\";\nimport Navbar from './Navbar.js';\nimport detectEthereumProvider from '@metamask/detect-provider';\n\n\nexport default function Table () {\n\n  const [selectedAddress, setSelectedAddress] = useState('');\n  const [propOne, setPropOne] = useState('');\n  const [propTwo, setPropTwo] = useState('');\n  const [propThree, setPropThree] = useState('');\n\n  React.useEffect(() => {\n    \n    async function checkProvider() {\n      const provider = await detectEthereumProvider();\n      if(provider){\n        console.log('hello');\n        connect();\n      }\n      \n    }\n    \n    checkProvider();\n  }, []);\n\n  async function connect() {\n    if (typeof window.ethereum == 'undefined') {\n      alert('Please install Metamask to continue');\n    }\n    let provider = new ethers.providers.Web3Provider(web3.currentProvider);\n    \n    const accounts = await provider.send(\"eth_requestAccounts\", []);\n    \n    \n    \n    let contract = new ethers.Contract('0x1eC7b4E7AD7BEa7371e849F4c31f267b95380055', abi, provider);\n    let propNumbers = await contract.viewProposals();\n    let numbers = await propNumbers[1]._hex;\n    let tableNumber = parseInt(numbers, 16);\n    console.log(tableNumber);\n\n    for (let i = tableNumber; i >= 1; i--){\n      let arr = [];\n      let proposalOne = await contract.proposalToId(i);\n      let description = await proposalOne.description;\n      let name = await proposalOne.name;\n      let proposedBy = await proposalOne.proposedBy.toString();\n      let item = await proposalOne.deadline;\n      let myDate = await new Date(item * 1000);\n      let finalDate = await myDate.toLocaleString();\n      let deadline = await finalDate + ' UTC';\n      let votesUp = await proposalOne.votesUp.toString();\n      let votesDown = await proposalOne.votesDown.toString();\n      let passed = await proposalOne.passed.toString();\n      arr.push(i.toString(), name, description, proposedBy, deadline, votesUp, votesDown, passed);\n      \n      if(i == tableNumber){\n        setPropThree( arr );\n      } else if(i == (tableNumber - 1)){\n        setPropTwo( arr );\n    } else if (i == (tableNumber - 2)){\n      setPropOne( arr );\n    }\n  }\n \n  setSelectedAddress(accounts[0]);\n    \n  \n    \n    \n  }\n\n  \n    if (!selectedAddress) {\n      return (\n        <>\n        <Navbar\n      title=\"DAO Proposals\"\n      message=\"Please connect your wallet to view recent DAO proposals\" />\n      <br></br>\n        <MDBBtn onClick={connect} outline rounded >\n        Show Recent Proposals\n      </MDBBtn>\n      </>\n      )\n    } \n      else if (selectedAddress.toString().length > 3){\n      console.log(selectedAddress);\n      return (\n        <>\n        <Navbar\n      title=\"DAO Proposals\"\n      message=\"You can view recent DAO proposals here\" />\n        <MDBTable striped>\n      <MDBTableHead>\n        <tr>\n          <th scope='col'>Proposal ID</th>\n          <th scope='col'>Name</th>\n          <th scope='col'>Description</th>\n          <th scope='col'>Proposed By</th>\n          <th scope='col'>Deadline</th>\n          <th scope='col'>Votes Up</th>\n          <th scope='col'>Votes Down</th>\n          <th scope='col'>Passed?</th>\n        </tr>\n      </MDBTableHead>\n      <MDBTableBody>\n        <tr>\n          <th scope='row'>{propThree[0]}</th>\n          <td> {propThree[1]}</td>\n          <td>{propThree[2]}</td>\n          <td>{propThree[3]}</td>\n          <td>{propThree[4]}</td>\n          <td>{propThree[5]}</td>\n          <td>{propThree[6]}</td>\n          <td>{propThree[7]}</td>\n        </tr>\n        <tr>\n          <th scope='row'>{propTwo[0]}</th>\n          <td> {propTwo[1]}</td>\n          <td>{propTwo[2]}</td>\n          <td>{propTwo[3]}</td>\n          <td>{propTwo[4]}</td>\n          <td>{propTwo[5]}</td>\n          <td>{propTwo[6]}</td>\n          <td>{propTwo[7]}</td>\n        </tr>\n        <tr>\n          <th scope='row'>{propOne[0]}</th>\n          <td>{propOne[1]}</td>\n          <td>{propOne[2]}</td>\n          <td>{propOne[3]}</td>\n          <td>{propOne[4]}</td>\n          <td>{propOne[5]}</td>\n          <td>{propOne[6]}</td>\n          <td>{propOne[7]}</td>\n        </tr>\n      </MDBTableBody>\n    </MDBTable>\n    </>\n      );\n    }\n  \n\n  \n    \n  \n}\n\n  \n"],"mappings":"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"},"metadata":{},"sourceType":"module"}